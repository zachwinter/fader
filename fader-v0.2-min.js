 /*
 * 
 *	fader.js v0.2 (c) 2014
 *	Expandable Fading Content Slideshow
 * 
 *	@author:  Zach Winter (contact@zachwinter.com)
 *	@license: MIT (http://www.opensource.org/licenses/mit-license.php)
 *
 */

; (function(e){e.fn.fader=function(t){var n=this;var r=e.extend({fadeSpeed:1500,swapDelay:7500,autoSwap:true,keyboard:true,baseIndex:0,bullets:false,fixedAspect:false,prevButton:false,nextButton:false,breakout:false,disableOnResize:true,disableOnNav:false,changeStart:function(e){},changeEnd:function(e){}},t);var i=1,s=n.find("> *"),o=n.find("> *:first-child"),u=false,a=false,f;var l=false;if(typeof Modernizr!="undefined"&&typeof Modernizr.csstransitions!="undefined"){l=Modernizr.csstransitions}else{var c=document.createElement("div").style,h=[c.transition,c.WebkitTransition,c.MozTransition];for(var p=0;p<h.length;p++){if(h[p]!=undefined){l=true;break}}}var d=function(){r.bullets.find("a").on("click",function(t){var n=e(this);if(!n.hasClass("active")&&u==false){r.bullets.find("a").removeClass("active");n.addClass("active");y(parseInt(n.attr("data-target")));if(r.disableOnNav){r.autoSwap=false;a=true}}t.preventDefault()})};var v=function(){e(document).on("keydown",function(e){if(e.keyCode==37&&u==false){g(false);if(r.disableOnNav){r.autoSwap=false;a=true}}if(e.keyCode==39&&u==false){g(true);if(r.disableOnNav){r.autoSwap=false;a=true}}})};var m=function(){if(r.prevButton!=false){r.prevButton.on("click",function(e){if(r.disableOnNav){r.autoSwap=false;a=true}if(u!=true)g(false);e.preventDefault()})}if(r.nextButton!=false){r.nextButton.on("click",function(e){if(r.disableOnNav){r.autoSwap=false;a=true}if(u!=true)g(true);e.preventDefault()})}};var g=function(e){if(r.bullets!=false)r.bullets.find("a").removeClass("active");if(e==true){if(i==s.length){if(r.bullets!=false)r.bullets.find('[data-target="1"]').addClass("active");y(1)}else{if(r.bullets!=false)r.bullets.find('[data-target="'+(i+1)+'"]').addClass("active");y(i+1)}}else{if(i==1){if(r.bullets!=false)r.bullets.find('[data-target="'+s.length+'"]').addClass("active");y(s.length)}else{if(r.bullets!=false)r.bullets.find('[data-target="'+(i-1)+'"]').addClass("active");y(i-1)}}};var y=function(t){var o=this,f=e('[data-slide="'+i+'"]'),c=e('[data-slide="'+t+'"]');u=true;n.trigger("slidechangestart");r.changeStart({event:"slidechangestart",container:n,currentSlide:i,upcomingSlide:t,totalSlides:s.length,settings:r});if(r.fixedAspect==false)n.css("height",n.height());f.css({position:"absolute",zIndex:r.baseIndex});o.cssAnimation=function(){c.one("transitionend webkitTransitionEnd",function(){o.finishUp();f.css({opacity:0,webkitTransition:"none",mozTransition:"none",transition:"none",zIndex:r.baseIndex})}).css({zIndex:r.baseIndex+1,opacity:1,webkitTransition:"opacity "+r.fadeSpeed/1e3+"s ease",mozTransition:"opacity "+r.fadeSpeed/1e3+"s ease",transition:"opacity "+r.fadeSpeed/1e3+"s ease"})};o.jQueryAnimation=function(){c.css({zIndex:r.baseIndex+1}).fadeIn(r.fadeSpeed,function(){o.finishUp();f.hide()})};o.finishUp=function(){c.css("position","relative");if(r.fixedAspect==false)n.css("height","auto");i=t;u=false;n.trigger("slidechangeend");r.changeEnd({event:"slidechangeend",container:n,currentSlide:i,totalSlides:s.length,settings:r});if(r.autoSwap==true&&a==false)b()};l==true?o.cssAnimation():o.jQueryAnimation()};var b=function(){clearTimeout(f);f=setTimeout(function(){if(u==false)g(true)},r.swapDelay)};var w=function(){var t=this,n=e(window),i=false;t.trigger=function(){u=false;if(r.autoSwap==true)b()};n.on("resize",function(){if(i!=false)clearTimeout(i);u=true;i=setTimeout(t.trigger,300)})};if(n.length){var E=n.css("position");if(E!="absolute"||E!="relative"||E!="fixed")n.css("position","relative");if(r.fixedAspect!=false){n.css({height:0,paddingBottom:r.fixedAspect+"%"})}if(l==true){s.css({display:"block",position:"absolute",top:0,opacity:0,width:"100%",height:"100%"});s.eq(0).css({opacity:1,zIndex:r.baseIndex+1,position:"relative"})}else{s.css({display:"none",position:"absolute",top:0,width:"100%",height:"100%"});s.eq(0).css({position:"relative",display:"block"})}s.each(function(){e(this).attr("data-slide",e(this).index()+1)});if(r.breakout!=false){r.breakout.find("> *").each(function(){e(this).attr("data-breakout",e(this).index()+1)})}if(r.bullets!=false){for(var p=0;p<s.length;p++){r.bullets.append('<li><a href="#" data-target="'+(p+1)+'">&nbsp;</a></li>')}r.bullets.find("li:first-child a").addClass("active");d()}if(r.keyboard==true)v();if(r.prevButton!=false||r.nextButton!=false)m();if(r.autoSwap==true)b();if(r.disableOnResize==true)w()}}})(jQuery);